pipeline {
    agent {
        label {
            label "dev"
            customWorkspace "/mnt/projects"
        }
    }
    environment {
        composeurl = "https://github.com/shwetaraut815/devops-CI-CD-project.git"
        composedirname = "devops-CI-CD-project/docker-compose"
    }
    stages {
        stage ("clone-docker-compose-file") {
            steps {
                sh'''
                rm -rf *
                git clone ${composeurl}
                '''
            }
        }
        stage ("run-compose") {
           steps {
                sh "cd ${composedirname} && sudo docker-compose up -d"
           } 
        }
    }

}